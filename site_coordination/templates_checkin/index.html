{% extends "base.html" %}

{% block content %}
  <section class="card">
    <h2>Selection</h2>
    <form method="post" action="{{ url_for('select_role') }}" class="form">
      <label class="radio">
        <input type="radio" name="role" value="researcher" checked />
        Researcher
      </label>
      <label class="radio">
        <input type="radio" name="role" value="service-provider" />
        Service Provider
      </label>
      <button type="submit" class="button">Continue</button>
    </form>
  </section>
  <section class="card qr-card">
    <h2>QR Code</h2>
    <p class="meta">Scan the code to open the Check-In webapp on this device.</p>
    <div class="qr-code" data-url="{{ base_url }}"></div>
    <p class="meta qr-url">{{ base_url }}</p>
  </section>

  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
    integrity="sha512-Iq3L1yWFGnFPQG4iZq3U7m2DC1OV8LuCGP2x3dP1Of+Fu2M4pG6n7Hd5t3ES7Vh09Sk+Qw9S0sK4ef0A3n3v8Q=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script>
    const qrContainer = document.querySelector(".qr-code");
    if (qrContainer) {
      const url = qrContainer.dataset.url;
      if (url) {
        new QRCode(qrContainer, {
          text: url,
          width: 180,
          height: 180,
        });
      }
    }
  </script>
{% endblock %}
